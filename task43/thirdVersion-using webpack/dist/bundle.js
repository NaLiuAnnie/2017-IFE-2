!function(e){function t(d){if(n[d])return n[d].exports;var l=n[d]={i:d,l:!1,exports:{}};return e[d].call(l.exports,l,l.exports,t),l.l=!0,l.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,d){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:d})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t){function n(){"OneThing"==event.target.innerText?(document.getElementById("onething-declare").style.display="block",document.getElementById("priority").style.display="none",document.getElementById("status").style.display="none",document.getElementById("one-thing").style.fontWeight="bolder",document.getElementById("all").style.fontWeight="normal",document.getElementById("btn1").style.visibility="hidden",document.getElementById("btn2").innerText="Add",i()):(document.getElementById("onething-declare").style.display="none",document.getElementById("priority").style.display="flex",document.getElementById("status").style.display="flex",document.getElementById("one-thing").style.fontWeight="normal",document.getElementById("all").style.fontWeight="bolder",l())}function d(e,t,n,d){var l=document.createElement("li");l.className="task-item",l.setAttribute("data-priority",d),l.setAttribute("data-itemindex",e),l.innerHTML='<div class="statusPanel"><p>已完成</p><p>待办</p><p>进行中</p></div><div class="editPanel"><p>编辑</p><p>删除</p></div>';var i=document.createElement("i");i.innerHTML="<i></i><i></i>",i.className="1"==t?"col-doing-icon":"2"==t?"col-upcoming-icon":"col-finish-icon",l.appendChild(i);var r=document.createElement("p");return r.className="task-content",r.innerHTML=n.toString(),l.appendChild(r),l}function l(){var e=document.getElementById("tasklist");e.innerHTML="";for(var t=0;t<h.length;t++){var n=h[t].index,l=h[t].status,i=h[t].content,r=h[t].priority,a=d(n,l,i,r);e.insertBefore(a,e.children[0])}}function i(){var e=document.getElementById("tasklist");e.innerHTML="";for(var t="",n=0,l=0;l<h.length;l++){var i=h[l].status,r=h[l].priority;"1"==i&&"1"==r&&(t?onethingTime>h[l].time&&(t=h[l].content,onethingTime=h[l].time,n=h[l].index):(t=h[l].content,onethingTime=h[l].time,n=h[l].index))}if(t){var a=d(n,1,t,r);e.appendChild(a)}}function r(){"Add"==document.getElementById("btn2").innerText?a():"DONE"==document.getElementById("btn2").innerText&&m()}function a(){document.getElementById("btn1").innerText="Cancel",document.getElementById("btn1").style.visibility="visible",document.getElementById("btn2").innerText="DONE",document.getElementById("priority").children[0].children[0].style.border="1px solid #979797",document.getElementById("priority").children[1].children[0].style.border="1px solid #979797",document.getElementById("priority").children[2].children[0].style.border="1px solid #979797",document.getElementById("status").children[0].children[0].style.border="1px solid #979797",document.getElementById("status").children[1].children[0].style.border="1px solid #979797",document.getElementById("status").children[2].children[0].style.border="1px solid #979797",document.getElementById("tasklist").innerHTML="";var e=document.createElement("input");e.type="text",e.className="task-item",document.getElementById("tasklist").appendChild(e),document.getElementById("tasklist").children[0].focus()}function o(){"Cancel"==document.getElementById("btn1").innerText&&(document.getElementById("btn1").style.visibility="hidden",document.getElementById("btn2").innerText="Add",l())}function s(){for(var e=document.getElementById("priority").children,t=0;t<3;t++)e[t].children[0].style.border="1px solid #979797";event.target.style.borderColor="red",E=event.target.getAttribute("data-index")}function c(){for(var e=document.getElementById("status").children,t=0;t<3;t++)e[t].children[0].style.border="1px solid #979797";event.target.style.borderColor="red",v=event.target.getAttribute("data-index")}function m(){var e=new Object;if(e.index=B,B+=1,e.content=document.getElementById("tasklist").children[0].value.toString(),""!=e.content){e.priority=E.toString(),e.status=v.toString(),e.time=Date.now().toString();var t=h.length;h[t]=e,window.localStorage.setItem("taskItem",h),document.getElementById("onething-declare").style.display="none",document.getElementById("priority").style.display="flex",document.getElementById("status").style.display="flex",document.getElementById("one-thing").style.fontWeight="normal",document.getElementById("all").style.fontWeight="bolder",document.getElementById("priority").children[0].children[0].style.border="none",document.getElementById("priority").children[1].children[0].style.border="none",document.getElementById("priority").children[2].children[0].style.border="none",document.getElementById("status").children[0].children[0].style.border="none",document.getElementById("status").children[1].children[0].style.border="none",document.getElementById("status").children[2].children[0].style.border="none",l(),document.getElementById("btn1").innerText="Cancel",document.getElementById("btn1").style.visibility="hidden",document.getElementById("btn2").innerText="Add"}}function y(){event.preventDefault(),u(),p(),I=event.changedTouches[0].pageX;for(var e=document.getElementsByClassName("editPanel").length,t=0;t<e;t++)document.getElementsByClassName("editPanel")[t].style.display="none";for(var n=document.getElementsByClassName("statusPanel").length,d=0;d<n;d++)document.getElementsByClassName("statusPanel")[d].style.display="none"}function g(){event.preventDefault();var e=event.changedTouches[0].pageX,t=e-I;if(T=event.target.parentNode.getAttribute("data-itemindex"),T||(T=event.target.getAttribute("data-itemindex")),t>0)"I"==event.target.parentNode.tagName?event.target.parentNode.parentNode.getElementsByClassName("statusPanel")[0].style.display="flex":event.target.parentNode.getElementsByClassName("statusPanel")[0].style.display="flex";else if(t<=0){if("I"==event.target.parentNode.tagName?event.target.parentNode.parentNode.getElementsByClassName("editPanel")[0].style.display="flex":event.target.parentNode.getElementsByClassName("editPanel")[0].style.display="flex","P"==event.target.tagName){f=event.target.innerText;var n=event.target.parentNode.children[2].className;N=event.target.parentNode.getAttribute("data-itemIndex"),b=event.target.getAttribute("data-priority")}else{f=event.target.children[3].innerText;event.target.children[2].className;N=event.target.getAttribute("data-itemIndex"),b=event.target.getAttribute("data-priority")}"col-finish-icon"==n?x=3:"col-upcoming-icon"==n?x=2:"col-doing-icon"==n&&(editStauts=1)}}function u(){if("statusPanel"==event.target.parentNode.className){var e=event.target.innerText,t=0;"已完成"==e?t=3:"待办"==e?t=2:"进行中"==e&&(t=1),h[T-1].status=t,window.localStorage.setItem("taskItem",h),l(),event.target.parentNode.style.display="none"}}function p(){if("editPanel"==event.target.parentNode.className&&"编辑"==event.target.innerText)a(),document.getElementsByClassName("task-item")[0].value=f,document.getElementById("priority").children[b-1].children[0].style.border="1px solid red",document.getElementById("status").children[x-1].children[0].style.border="1px solid red";else if("editPanel"==event.target.parentNode.className&&"删除"==event.target.innerText){var e=event.target.parentNode.parentNode.getAttribute("data-itemindex");h.splice(e-1,1),window.localStorage.setItem("taskItem",JSON.stringify(h)),event.target.parentNode.style.display="none",l()}}var E=1,v=2,h="",I=0,B=4,f="",b=0,x=2,N=0,T=null;window.onload=function(){window.localStorage.setItem("taskItem",JSON.stringify(taskData)),h=JSON.parse(localStorage.taskItem);var e=document.getElementById("header").children[0];"Add"==e.innerText&&(e.style.visibility="hidden"),document.getElementById("onething-declare").style.display="none",document.getElementById("priority").style.display="flex",document.getElementById("status").style.display="flex",document.getElementById("one-thing").style.fontWeight="normal",document.getElementById("all").style.fontWeight="bolder",l(),document.getElementById("one-thing").addEventListener("click",n,!1),document.getElementById("all").addEventListener("click",n,!1),document.getElementById("btn2").addEventListener("click",r,!1),document.getElementById("btn1").addEventListener("click",o,!1),document.getElementById("priority").addEventListener("click",s,!1),document.getElementById("status").addEventListener("click",c,!1),document.getElementById("tasklist").addEventListener("touchstart",y),document.getElementById("tasklist").addEventListener("touchmove",g)}}]);